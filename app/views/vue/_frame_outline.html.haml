%script{'type'=>"text/x-template", id: 'frame-outline'}
  %g{ ":transform":"truss_transform"  }
    %polyline{":points":"`0,0 |
                          ${frame.width},0 |
                          ${frame.width},${frame_size} |
                          0,${frame_size}`"} |
      i
    %polyline{":points":"`${frame.width - frame_size},${frame_size} |
                          ${frame.width},${frame_size} |
                          ${frame.width},${frame.height} |
                          ${frame.width - frame_size},${frame.height}`"} |
      i
    %polyline{":points":"`0,${frame_size} |
                          ${frame_size},${frame_size} |
                          ${frame_size},${frame.height} |
                          0,${frame.height}`"} |
:ruby2js
  class FrameOutline < Vue
    template "#frame-outline"
    props [:frame]
    def initialize
    end
    def truss_transform
      h = self.frame.truss.on ? self.truss_height : 0
      return "translate(0," + h + ")"
    end
    def truss_height
      return self.frame.width * Math.tan(self.frame.truss.angle * (Math.PI/180))/ 2
    end
    def frame_size
      return self.frame.size*2.5
    end
  end
